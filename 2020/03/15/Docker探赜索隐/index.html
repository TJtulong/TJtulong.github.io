<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="容器,">










<meta name="description" content="Docker简介Docker的出现一款产品从开发到上线，从操作系统，到运行环境，再到应用配置。作为开发+运维之间的协作需要关心很多西，这也是很多互联网公司都不得不面对的问题，特别是各种版本的迭代之后，不同版本环境的兼容，对运维人员都是考验。 Docker之所以发展如此迅速，也是因为它对此给出了一个标准化的解决方案。开发人员利用 Docker 可以消除协作编码时“在我的机器上可正常工作”的问题。透过">
<meta name="keywords" content="容器">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker探赜索隐">
<meta property="og:url" content="http://yoursite.com/2020/03/15/Docker探赜索隐/index.html">
<meta property="og:site_name" content="椰子皮&#39;s Blog">
<meta property="og:description" content="Docker简介Docker的出现一款产品从开发到上线，从操作系统，到运行环境，再到应用配置。作为开发+运维之间的协作需要关心很多西，这也是很多互联网公司都不得不面对的问题，特别是各种版本的迭代之后，不同版本环境的兼容，对运维人员都是考验。 Docker之所以发展如此迅速，也是因为它对此给出了一个标准化的解决方案。开发人员利用 Docker 可以消除协作编码时“在我的机器上可正常工作”的问题。透过">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://picture.tjtulong.top/011f3ef6-d824-4d43-8b2c-36dab8eaaa72-1.png">
<meta property="og:image" content="http://picture.tjtulong.top/be608a77-7b7f-4f8e-87cc-f2237270bf69.png">
<meta property="og:image" content="http://picture.tjtulong.top/Docker%E6%9E%84%E6%9E%B6%E5%9B%BE.png">
<meta property="og:image" content="http://picture.tjtulong.top/%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%99%A8.JPG">
<meta property="og:image" content="http://picture.tjtulong.top/dockerhelloworld.JPG">
<meta property="og:image" content="http://picture.tjtulong.top/Docker%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C.png">
<meta property="og:image" content="http://picture.tjtulong.top/docker%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4.JPG">
<meta property="og:image" content="http://picture.tjtulong.top/%E9%95%9C%E5%83%8F%E5%88%86%E5%B1%82.JPG">
<meta property="og:image" content="http://picture.tjtulong.top/Docker%E8%BF%90%E8%A1%8CTomcat.JPG">
<meta property="og:image" content="http://picture.tjtulong.top/%E6%95%B0%E6%8D%AE%E5%8D%B7%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB.png">
<meta property="og:image" content="http://picture.tjtulong.top/Docker%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B.png">
<meta property="og:image" content="http://picture.tjtulong.top/DockerFile.png">
<meta property="og:updated_time" content="2020-03-15T01:50:42.243Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Docker探赜索隐">
<meta name="twitter:description" content="Docker简介Docker的出现一款产品从开发到上线，从操作系统，到运行环境，再到应用配置。作为开发+运维之间的协作需要关心很多西，这也是很多互联网公司都不得不面对的问题，特别是各种版本的迭代之后，不同版本环境的兼容，对运维人员都是考验。 Docker之所以发展如此迅速，也是因为它对此给出了一个标准化的解决方案。开发人员利用 Docker 可以消除协作编码时“在我的机器上可正常工作”的问题。透过">
<meta name="twitter:image" content="http://picture.tjtulong.top/011f3ef6-d824-4d43-8b2c-36dab8eaaa72-1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/03/15/Docker探赜索隐/">





  <title>Docker探赜索隐 | 椰子皮's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">椰子皮's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/15/Docker探赜索隐/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tulong Xiao">
      <meta itemprop="description" content>
      <meta itemprop="image" content="http://picture.tjtulong.top/QQ%E5%9B%BE%E7%89%8720190515225418.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="椰子皮's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Docker探赜索隐</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-15T09:48:52+08:00">
                2020-03-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/分布式/" itemprop="url" rel="index">
                    <span itemprop="name">分布式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3.9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  15
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Docker简介"><a href="#Docker简介" class="headerlink" title="Docker简介"></a>Docker简介</h1><h2 id="Docker的出现"><a href="#Docker的出现" class="headerlink" title="Docker的出现"></a>Docker的出现</h2><p>一款产品从开发到上线，从操作系统，到运行环境，再到应用配置。作为开发+运维之间的协作需要关心很多西，这也是很多互联网公司都不得不面对的问题，特别是各种版本的迭代之后，不同版本环境的兼容，对运维人员都是考验。</p>
<p>Docker之所以发展如此迅速，也是因为它对此给出了一个<strong>标准化</strong>的解决方案。开发人员利用 Docker 可以消除协作编码时“在我的机器上可正常工作”的问题。透过镜像(images)将作业系统核心，运作应用程式所需要的<strong>系统环境</strong>，由下而上打包，达到应用程式跨平台间的无缝接轨运作。</p>
<p>Docker是基于Go语言实现的云开源项目。Docker的主要目标是“<strong>Build，Ship and Run Any App, Anywhere</strong>”。运行环境能够做到“<strong>一次封装，到处运行</strong>”。</p>
<p><img src="http://picture.tjtulong.top/011f3ef6-d824-4d43-8b2c-36dab8eaaa72-1.png" alt></p>
<a id="more"></a>
<h2 id="容器对比虚拟机"><a href="#容器对比虚拟机" class="headerlink" title="容器对比虚拟机"></a>容器对比虚拟机</h2><p>虚拟机（virtual machine）就是带环境安装的一种解决方案，虚拟机的缺点：<strong>资源占用多、冗余步骤多 、启动慢。</strong></p>
<p>Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。有了容器，就可以将软件运行所需的所有资源打包到一个隔离的容器中。容器与虚拟机不同，<strong>不需要捆绑一整套操作系统，只需要当前软件工作所需的库资源和设置。</strong>系统因此而变得高效轻量并保证部署在任何环境中的软件都能始终如一地运行。</p>
<p><img src="http://picture.tjtulong.top/be608a77-7b7f-4f8e-87cc-f2237270bf69.png" alt></p>
<p><strong>二者的不同之处：</strong></p>
<p>传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程；</p>
<p>而容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此<strong>容器要比传统虚拟机更为轻便</strong>。每个容器之间互相隔离，每个容器有自己的文件系统 ，容器之间进程不会相互影响，能区分计算资源。</p>
<h2 id="Docker基础架构"><a href="#Docker基础架构" class="headerlink" title="Docker基础架构"></a>Docker基础架构</h2><p>Docker有三个重要的概念：<strong>仓库、镜像和容器</strong> ，它们是Docker的三大基础组件。</p>
<p><img src="http://picture.tjtulong.top/Docker%E6%9E%84%E6%9E%B6%E5%9B%BE.png" alt></p>
<p>Docker本身是一个容器运行载体或称之为管理引擎。我们把应用程序和配置依赖打包好形成一个可交付的运行环境，这个<strong>打包好的运行环境就是image镜像文件</strong>。只有通过这个镜像文件才能生成Docker容器。image文件可以看作是容器的模板。<strong>Docker根据镜像文件生成容器的实例</strong>。同一个image文件，可以生成多个同时运行的容器实例。仓库（Repository）是集中存放镜像文件的场所。</p>
<h1 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h1><p>安装以CentOS6.8为例</p>
<p><strong>step1：安装EPEL包</strong></p>
<p><code>yum install -y epel-release</code></p>
<p><strong>step2：安装Docker</strong></p>
<p><code>yum install -y docker-io</code></p>
<p>安装后的配置文件在：/etc/sysconfig/docker</p>
<p><strong>step3：启动Docker</strong></p>
<p><code>service docker start</code></p>
<p><code>docker version</code></p>
<p><strong>step4：配置阿里云镜像加速</strong></p>
<p><a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank" rel="noopener">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a></p>
<p><img src="http://picture.tjtulong.top/%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%99%A8.JPG" alt></p>
<p>找到自己的加速器地址：<a href="https://xxxx.mirror.aliyuncs.com" target="_blank" rel="noopener">https://xxxx.mirror.aliyuncs.com</a></p>
<p><code>vim /etc/sysconfig/docker</code></p>
<p>将获得的自己账户下的阿里云加速地址配置进:</p>
<p><code>other_args=&quot;--registry-mirror=https://自己的账号加速信息.mirror.aliyuncs.com&quot;</code></p>
<p>重启Docker<code>service docker restart</code>即可</p>
<p><strong>step5：测试HelloWorld</strong></p>
<p><code>docker run hello-world</code></p>
<p><img src="http://picture.tjtulong.top/dockerhelloworld.JPG" alt></p>
<p><strong>Docker运行原理：</strong></p>
<p>Docker是一个Client-Server结构的系统，Docker守护进程运行在主机上，然后通过Socket连接从客户端访问，守护进程从客户端接受命令并管理运行在主机上的容器。</p>
<p><img src="http://picture.tjtulong.top/Docker%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C.png" alt></p>
<p><em>当新建一个虚拟机时，虚拟机软件需要加载Guest OS，返个新建过程是分钟级别的。而Docker由于直接利用宿主机的操作系统，则省略了返个过程,因此新建一个Docker容器只需要<strong>几秒钟</strong>。</em></p>
<h1 id="Docker的常用命令"><a href="#Docker的常用命令" class="headerlink" title="Docker的常用命令"></a>Docker的常用命令</h1><h2 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h2><p><code>docker version</code></p>
<p><code>docker info</code></p>
<p><code>docker --help</code></p>
<h2 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h2><p><code>docker images</code></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE</span><br><span class="line">hello-world         latest              <span class="number">9</span>f5834b25059        <span class="number">14</span> months ago       <span class="number">1</span>.<span class="number">84</span> kB</span><br></pre></td></tr></table></figure>
<ul>
<li>REPOSITORY：表示镜像的仓库源</li>
<li>TAG：镜像的标签</li>
<li>IMAGE ID：镜像ID</li>
<li>CREATED：镜像创建时间</li>
<li>SIZE：镜像大小</li>
</ul>
<p><code>docker search</code>搜索某个镜像名称（从<a href="http://hub.docker.com）" target="_blank" rel="noopener">http://hub.docker.com）</a></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; docker search tomcat</span><br><span class="line">NAME                  DESCRIPTION                         STARS     OFFICIAL   AUTOMATED</span><br><span class="line">tomcat                Apache Tomcat is an open source implementa...   <span class="number">2659</span>      [OK]       </span><br><span class="line">tomee                 Apache TomEE is an all-Apache Java EE cert...   <span class="number">75</span>        [OK]       </span><br><span class="line">dordoka/tomcat        Ubuntu <span class="number">14</span>.<span class="number">04</span>, Oracle JDK <span class="number">8</span> and Tomcat <span class="number">8</span> ba...   <span class="number">53</span>        [OK]</span><br><span class="line">bitnami/tomcat        Bitnami Tomcat Docker Image                     <span class="number">31</span>        [OK]</span><br><span class="line">kubeguide/tomcat-app  Tomcat image <span class="keyword">for</span> Chapter <span class="number">1</span>                      <span class="number">28</span>        [OK]</span><br></pre></td></tr></table></figure>
<p><code>docker pull 镜像名称[:TAG]</code>下载镜像</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop1 /]# docker pull tomcat</span><br><span class="line"><span class="function">latest: <span class="title">Pulling</span> <span class="title">from</span> <span class="title">tomcat</span></span></span><br><span class="line"><span class="function"><span class="title">ed7bc7435c95</span>: <span class="title">Pull</span> <span class="title">complete</span></span></span><br><span class="line"><span class="function">......</span></span><br><span class="line"><span class="function"><span class="title">Digest</span>: <span class="title">sha256</span>:613<span class="title">e0884313f0da2e3b536c0c1c1850a9df405055e78320eb24b1559b708fa3c</span></span></span><br><span class="line"><span class="function"><span class="title">Status</span>: <span class="title">Downloaded</span> <span class="title">newer</span> <span class="title">image</span> <span class="title">for</span> <span class="title">tomcat:latest</span></span></span><br></pre></td></tr></table></figure>
<p><code>docker rmi 镜像名称[:TAG]</code>删除镜像</p>
<p><img src="http://picture.tjtulong.top/docker%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4.JPG" alt></p>
<h2 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h2><p><strong>有镜像才能创建容器</strong></p>
<p><code>docker run [OPTION] IMAGE [COMMAND][ARG...]</code>新建并启动容器</p>
<ul>
<li>–name=”容器新名字”: 为容器指定一个名称；</li>
<li>-d: 后台运行容器，并返回容器ID，也即启动守护式容器；</li>
<li><strong>-i：以交互模式运行容器，通常与 -t 同时使用；</strong></li>
<li>-t：为容器重新分配一个伪输入终端，通常与 -i 同时使用；</li>
<li>-P: 随机端口映射；</li>
<li>-p: 指定端口映射，有以下四种格式</li>
</ul>
<p>​            ip:hostPort:containerPort</p>
<p>​            ip::containerPort</p>
<p>​            hostPort:containerPort</p>
<p>​            containerPort</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; docker run -it --mycentos <span class="number">2</span>f5f33207762</span><br></pre></td></tr></table></figure>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop1 桌面]# docker run -it efa3cf</span><br><span class="line">[root@a596cb0250f4 /]# ll</span><br></pre></td></tr></table></figure>
<p><code>docker ps [OPTIONS]</code>列出正在运行的容器</p>
<p>OPTIONS说明（常用）：</p>
<ul>
<li>-a : 列出当前所有正在运行的容器+历史上运行过的</li>
<li>-l : 显示最近创建的容器。</li>
<li>-n：显示最近n个创建的容器。</li>
<li>-q : 静默模式，只显示容器编号。</li>
<li>–no-trunc : 不截断输出。</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop1 桌面]# docker ps</span><br><span class="line">CONTAINER ID      IMAGE     COMMAND    CREATED          STATUS     PORTS       NAMES</span><br><span class="line">a596cb0250f4     efa3cf   "/bin/bash"  <span class="number">5</span> minutes ago    Up <span class="number">5</span> minutes    desperate_turing</span><br></pre></td></tr></table></figure>
<p><code>exit</code>  容器停止并退出</p>
<p><code>Ctrl + P + Q</code>  容器不停止退出</p>
<p><code>docker start 容器ID</code>  启动容器</p>
<p><code>docker restart 容器ID</code>  重启容器</p>
<p><code>docker stop 容器ID</code>  停止容器</p>
<p><code>docker kill 容器ID</code>  强制停止容器</p>
<p><code>docker rm 容器ID</code>  删除已停止容器</p>
<p><code>docker run -d centos /bin/sh -c &quot;while true;do echo hello zzyy;sleep 2;done&quot;</code></p>
<p>上面命令是启动守护式容器，不显示终端，可以通过查日志了解运行情况</p>
<p><code>docker logs -f -t --tail 倒数几条 容器ID</code></p>
<p>查看容器内运行的进程：<code>docker top 容器ID</code></p>
<p>查看容器内部细节：<code>docker inspect 容器ID</code></p>
<p>进入正在运行的容器并以命令行交互：</p>
<ol>
<li><p>直接进入容器启动命令的终端，不会启动新的进程</p>
<p><code>docker attach 容器ID</code></p>
</li>
<li><p>是在容器中打开新的终端，并且可以启动新的进程</p>
<p><code>docker exec -it 容器ID bashShell</code></p>
</li>
</ol>
<p>从容器内拷贝文件到主机上：<code>docker cp 容器ID:容器内路径 目标主机路径</code></p>
<h1 id="Docker镜像"><a href="#Docker镜像" class="headerlink" title="Docker镜像"></a>Docker镜像</h1><p><strong>镜像</strong>是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，<strong>包括代码、运行时、库、环境变量和配置文件</strong>。</p>
<h2 id="分层结构"><a href="#分层结构" class="headerlink" title="分层结构"></a>分层结构</h2><p>UnionFS（联合文件系统）：Union文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持<strong>对文件系统的修改作为一次提交来一层层的叠加</strong>，同时可以将不同目录挂载到同一个虚拟文件系统下(unite several directories into a single virtual filesystem)。Union 文件系统是 Docker 镜像的基础。镜像可以通过<strong>分层</strong>来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。</p>
<p>特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录。</p>
<p>在下载的过程中我们可以看到docker的镜像好像是在一层一层的在下载。</p>
<p><em>为什么一个Tomcat镜像500Mb：因为它有很多层依赖</em></p>
<p><img src="http://picture.tjtulong.top/%E9%95%9C%E5%83%8F%E5%88%86%E5%B1%82.JPG" alt></p>
<p><strong>分层的原因：</strong></p>
<p>分层最大的一个好处就是<strong>共享资源</strong></p>
<p>有多个镜像都从相同的base镜像构建而来，那么宿主机只需在磁盘上保存一份base镜像；</p>
<p>同时内存中也只需加载一份base镜像，就可以为所有容器服务了，而且镜像的每一层都可以被共享。</p>
<h2 id="镜像的特点"><a href="#镜像的特点" class="headerlink" title="镜像的特点"></a>镜像的特点</h2><p>Docker镜像都是<strong>只读</strong>的，当容器启动时，一个新的可写层被加载到镜像的顶部，这一层通常被称为<strong>容器层</strong>，容器层之下的都叫<strong>镜像层</strong>。</p>
<p><code>docker cp 容器ID:容器内路径 目标`</code>docker cp 容器ID:容器内路径 目标主机路径`</p>
<h2 id="镜像Commit"><a href="#镜像Commit" class="headerlink" title="镜像Commit"></a>镜像Commit</h2><p><code>docker commit</code> 提交容器副本使之成为一个新的镜像。</p>
<p><code>docker commit -m=&quot;提交的描述信息&quot; -a=&quot;作者&quot; 容器ID 要创建的目标镜像名:[标签名]</code></p>
<p><strong>以删除Tomcat中的docs目录并打包镜像为例：</strong></p>
<ol>
<li>以8888端口运行Tomcat：<code>docker run -it -p 8888:8080 tomcat:6.0</code></li>
</ol>
<p><img src="http://picture.tjtulong.top/Docker%E8%BF%90%E8%A1%8CTomcat.JPG" alt></p>
<ol start="2">
<li>打开命令行：<code>docker exec -it dd48eb572cfa /bin/bash</code></li>
<li>删除webapps目录下的docs文件</li>
<li>打包镜像：<code>docker commit -a=&quot;tulong&quot; -m=&quot;del tomcat docs&quot; dd48eb572cfa tulong/mytomcat:1.2</code></li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">REPOSITORY          TAG             IMAGE ID            CREATED             VIRTUAL SIZE</span><br><span class="line">tulong/mytomcat     <span class="number">1</span>.<span class="number">2</span>             <span class="number">5</span>af170c2e5bd        <span class="number">5</span> seconds ago       <span class="number">354</span>.<span class="number">7</span> MB</span><br></pre></td></tr></table></figure>
<h1 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h1><p>Docker容器产生的数据，如果不通过docker commit生成新的镜像，使得数据做为镜像的一部分保存下来，那么当容器删除后，数据自然也就没有了。为了能保存数据在docker中我们使用容器数据卷。</p>
<p>卷的设计目的就是数据的持久化，完全独立于容器的生存周期，因此Docker不会在容器删除时删除其挂载的数卷，其特点为：</p>
<ul>
<li>数据卷可在容器之间共享或重用数据；</li>
<li>卷中的更改可以直接生效；</li>
<li>数据卷中的更改不会包含在镜像的更新中；</li>
<li>数据卷的生命周期一直持续到没有容器使用它为止。</li>
</ul>
<h2 id="数据卷"><a href="#数据卷" class="headerlink" title="数据卷"></a>数据卷</h2><h3 id="直接命令添加"><a href="#直接命令添加" class="headerlink" title="直接命令添加"></a>直接命令添加</h3><p>将容器与宿主机之间文件绑定：</p>
<p><code>docker run -it -v /宿主机目录:/容器内目录 centos /bin/bash</code></p>
<p>查看数据卷是否挂在成功：</p>
<p><code>docker inspect 容器ID</code></p>
<p>容器与宿主机之间数据共享：</p>
<p><img src="http://picture.tjtulong.top/%E6%95%B0%E6%8D%AE%E5%8D%B7%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB.png" alt></p>
<p><strong>容器停止退出后，主机修改后数据同步。</strong></p>
<p>只读权限：<code>docker run -it -v /宿主机绝对路径目录:/容器内目录 ro 镜像名</code></p>
<h3 id="Dockerfile添加"><a href="#Dockerfile添加" class="headerlink" title="Dockerfile添加"></a>Dockerfile添加</h3><p>Dockerfile为Image的描述文件</p>
<p>可在Dockerfile中使用<strong>VOLUME指令</strong>来给镜像添加一个或多个数据卷：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># volume test</span></span><br><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">"/dataVolumeContainer1"</span>,<span class="string">"/dataVolumeContainer2"</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"finished,--------success1"</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /bin/bash</span></span><br></pre></td></tr></table></figure>
<p>build后生成新镜像：</p>
<p><code>docker build -f /mydocker/dockerfile -t tulong/centos</code></p>
<p>run容器后自动挂载了两个目录<code>/dataVolumeContainer1</code>和<code>/dataVolumeContainer2</code></p>
<h2 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h2><p>命名的容器挂载数据卷，其它容器通过挂载这个(父容器)实现数据共享，挂载数据卷的容器，称之为数据卷容器.</p>
<p>dc02继承自dc01:</p>
<p><code>docker run -it --name dc02 --volumes-from dc01 tulong/centos</code></p>
<p>dc03继承自dc02</p>
<p>在dc01、dc02、dc03任意一个添加文件其它两个都会存在。</p>
<p><strong>结论：容器之间配置信息的传递，数据卷的生命周期一直持续到没有容器使用它为止</strong></p>
<h1 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>Dockerfile是用来构建Docker镜像的构建文件，是由一系列命令和参数构成的脚本。</p>
<p><strong>构件步骤：</strong></p>
<ol>
<li>编写DockerFile文件</li>
<li>docker build 创建镜像</li>
<li>docker run 运行镜像</li>
</ol>
<p>CentOS6.8 的 Dockerfile：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> scratch </span><br><span class="line"><span class="keyword">MAINTAINER</span> The CentOS Project &lt;cloud-ops@centos.org&gt;</span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> c68-docker.tar.xz /</span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> name=<span class="string">"CentOS Base Image"</span> \</span></span><br><span class="line"><span class="bash">    vendor=<span class="string">"CentOS"</span> \</span></span><br><span class="line"><span class="bash">    license=<span class="string">"GPLv2"</span> \</span></span><br><span class="line"><span class="bash">    build-date=<span class="string">"2016-06-02"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Default command</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"/bin/bash"</span>]</span></span><br></pre></td></tr></table></figure>
<h2 id="Dockerfile构建解析过程"><a href="#Dockerfile构建解析过程" class="headerlink" title="Dockerfile构建解析过程"></a>Dockerfile构建解析过程</h2><p><strong>Dockerfile文件内容：</strong></p>
<ol>
<li>每条保留字指令都必须为大写字母且后面要跟随至少一个参数</li>
<li>指令按照从上到下，顺序执行</li>
<li>#表示注释</li>
<li>每条指令都会创建一个新的镜像层，并对镜像进行提交</li>
</ol>
<p><strong>Docker执行Dockerfile的大致流程：</strong></p>
<ol>
<li>Docker从基础镜像运行一个容器；</li>
<li>执行一条指令并对容器作出修改；</li>
<li>执行类似Docker commit的操作提交一个新的镜像层；</li>
<li>Docker再基于刚提交的镜像运行一个新容器；</li>
<li>执行Dockerfile中的下一条指令直到所有指令都执行完成。</li>
</ol>
<p><img src="http://picture.tjtulong.top/Docker%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B.png" alt></p>
<h2 id="Dockerfile保留字指令"><a href="#Dockerfile保留字指令" class="headerlink" title="Dockerfile保留字指令"></a>Dockerfile保留字指令</h2><p>FROM：基础镜像，当前镜像是基于那个镜像的；</p>
<p>MAINTAINER：作者、邮箱；</p>
<p>RUN：容器构建时需要运行的命令；</p>
<p>EXPOSE：暴露端口号，启动容器的时候还需使用 –p 指定端口；</p>
<p>WORKDIR：指定在创建容器后，终端默认登录后进来的工作目录，一个落脚点，默认根目录，通常绝对路径，CMD ENTRYPOINT 都会在这个目录下执行；</p>
<p>ENV：构建镜像的过程中设置环境变量, 构建和运行时都有效可以使用$引用；</p>
<p>ADD：将宿主机目录下的文件拷贝到镜像且会<strong>自动处理URL和解压tar压缩包</strong>；</p>
<p>COPY：拷贝文件和目录到镜像中，将从构建上下文目录中&lt;源路径&gt;的文件/复制到新的一层镜像内&lt;目标路径&gt;的位置。语法：COPY src dest  COPY [“src”, “desc”]；</p>
<p>VOLUME：容器数据卷, 数据保存和持久化；</p>
<p>USER：指定该镜像由什么用户运行，不指定由root 运行；</p>
<p>CMD：指定容器启动时要运行默认的命令，Dockerfile中可以有多个cmd , 但只有最后一个生效；</p>
<p>ENTERPOINT：指定容器启动时要运行的命令。</p>
<h2 id="案例一：封装CentOS"><a href="#案例一：封装CentOS" class="headerlink" title="案例一：封装CentOS"></a>案例一：封装CentOS</h2><p>自定义mycentos目的使镜像具备:登陆后的默认路径、vim编辑器、查看网络配置ifconfig支持。</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"><span class="keyword">MAINTAINER</span> zzyy&lt;zzyy167@<span class="number">126</span>.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> MYPATH /usr/local</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> <span class="variable">$MYPATH</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install vim</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install net-tools</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$MYPATH</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"success--------------ok"</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /bin/bash</span></span><br></pre></td></tr></table></figure>
<h2 id="案例二：自定义Tomcat"><a href="#案例二：自定义Tomcat" class="headerlink" title="案例二：自定义Tomcat"></a>案例二：自定义Tomcat</h2><p>step1: 首先创建文件夹存放jdk与tomcat的安装包</p>
<p><code>mkdir -p /tulong/mydockerfile/tomcat9</code></p>
<p>step2:将jdk和tomcat安装的压缩包拷贝进上一步目录</p>
<p><code>apache-tomcat-9.0.8.tar.gz</code>与<code>jdk-8u171-linux-x64.tar.gz</code></p>
<p>step3:在/tulong/mydockerfile/tomcat9目录下新建Dockerfile文件</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span>         centos</span><br><span class="line"><span class="keyword">MAINTAINER</span>    zzyy&lt;zzyybs@<span class="number">126</span>.com&gt;</span><br><span class="line"><span class="comment">#把宿主机当前上下文的c.txt拷贝到容器/usr/local/路径下</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> c.txt /usr/<span class="built_in">local</span>/cincontainer.txt</span></span><br><span class="line"><span class="comment">#把java与tomcat添加到容器中</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> jdk-8u171-linux-x64.tar.gz /usr/<span class="built_in">local</span>/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> apache-tomcat-9.0.8.tar.gz /usr/<span class="built_in">local</span>/</span></span><br><span class="line"><span class="comment">#安装vim编辑器</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install vim</span></span><br><span class="line"><span class="comment">#设置工作访问时候的WORKDIR路径，登录落脚点</span></span><br><span class="line"><span class="keyword">ENV</span> MYPATH /usr/local</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> <span class="variable">$MYPATH</span></span></span><br><span class="line"><span class="comment">#配置java与tomcat环境变量</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME /usr/local/jdk1.<span class="number">8.0</span>_171</span><br><span class="line"><span class="keyword">ENV</span> CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line"><span class="keyword">ENV</span> CATALINA_HOME /usr/local/apache-tomcat-<span class="number">9.0</span>.<span class="number">8</span></span><br><span class="line"><span class="keyword">ENV</span> CATALINA_BASE /usr/local/apache-tomcat-<span class="number">9.0</span>.<span class="number">8</span></span><br><span class="line"><span class="keyword">ENV</span> PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin</span><br><span class="line"><span class="comment">#容器运行时监听的端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span>  <span class="number">8080</span></span><br><span class="line"><span class="comment">#启动时运行tomcat</span></span><br><span class="line"><span class="comment"># ENTRYPOINT ["/usr/local/apache-tomcat-9.0.8/bin/startup.sh" ]</span></span><br><span class="line"><span class="comment"># CMD ["/usr/local/apache-tomcat-9.0.8/bin/catalina.sh","run"]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /usr/<span class="built_in">local</span>/apache-tomcat-9.0.8/bin/startup.sh &amp;&amp; tail -F /usr/<span class="built_in">local</span>/apache-tomcat-9.0.8/bin/logs/catalina.out</span></span><br></pre></td></tr></table></figure>
<p>step4:构件镜像</p>
<p> <code>docker build -t mytomcat</code></p>
<p>step5:运行容器</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="number">9080</span>:<span class="number">8080</span> --name myt9 </span><br><span class="line">-v /zzyyuse/mydockerfile/tomcat9/test:/usr/local/apache-tomcat-<span class="number">9</span>.<span class="number">0</span>.<span class="number">8</span>/webapps/test </span><br><span class="line">-v /zzyyuse/mydockerfile/tomcat9/tomcat9logs/:/usr/local/apache-tomcat-<span class="number">9</span>.<span class="number">0</span>.<span class="number">8</span>/logs</span><br><span class="line">--privileged=true zzyytomcat9</span><br></pre></td></tr></table></figure>
<p><strong>注：test目录中加入war包可以挂载到容器内，容器中logs文件中产生的日志可以同步到主机上。</strong></p>
<p>Docker全流程示意图：</p>
<p><img src="http://picture.tjtulong.top/DockerFile.png" alt></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/容器/" rel="tag"># 容器</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/02/18/Scala初探/" rel="next" title="Scala初探">
                <i class="fa fa-chevron-left"></i> Scala初探
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/03/15/Java的四种引用/" rel="prev" title="Java的四种引用">
                Java的四种引用 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="http://picture.tjtulong.top/QQ%E5%9B%BE%E7%89%8720190515225418.jpg" alt="Tulong Xiao">
            
              <p class="site-author-name" itemprop="name">Tulong Xiao</p>
              <p class="site-description motion-element" itemprop="description">Almost Famous</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">54</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/TJtulong" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:TJtulong@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/u/2610493505/home" target="_blank" title="微博">
                      
                        <i class="fa fa-fw fa-weibo"></i>微博</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/TJtulong" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-book"></i>CSDN</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.tongji.edu.cn/" title="同济大学" target="_blank">同济大学</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker简介"><span class="nav-number">1.</span> <span class="nav-text">Docker简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker的出现"><span class="nav-number">1.1.</span> <span class="nav-text">Docker的出现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#容器对比虚拟机"><span class="nav-number">1.2.</span> <span class="nav-text">容器对比虚拟机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker基础架构"><span class="nav-number">1.3.</span> <span class="nav-text">Docker基础架构</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker安装"><span class="nav-number">2.</span> <span class="nav-text">Docker安装</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker的常用命令"><span class="nav-number">3.</span> <span class="nav-text">Docker的常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#帮助命令"><span class="nav-number">3.1.</span> <span class="nav-text">帮助命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#镜像命令"><span class="nav-number">3.2.</span> <span class="nav-text">镜像命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#容器命令"><span class="nav-number">3.3.</span> <span class="nav-text">容器命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker镜像"><span class="nav-number">4.</span> <span class="nav-text">Docker镜像</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#分层结构"><span class="nav-number">4.1.</span> <span class="nav-text">分层结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#镜像的特点"><span class="nav-number">4.2.</span> <span class="nav-text">镜像的特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#镜像Commit"><span class="nav-number">4.3.</span> <span class="nav-text">镜像Commit</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#容器数据卷"><span class="nav-number">5.</span> <span class="nav-text">容器数据卷</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据卷"><span class="nav-number">5.1.</span> <span class="nav-text">数据卷</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#直接命令添加"><span class="nav-number">5.1.1.</span> <span class="nav-text">直接命令添加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dockerfile添加"><span class="nav-number">5.1.2.</span> <span class="nav-text">Dockerfile添加</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据卷容器"><span class="nav-number">5.2.</span> <span class="nav-text">数据卷容器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Dockerfile"><span class="nav-number">6.</span> <span class="nav-text">Dockerfile</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#概念"><span class="nav-number">6.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dockerfile构建解析过程"><span class="nav-number">6.2.</span> <span class="nav-text">Dockerfile构建解析过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dockerfile保留字指令"><span class="nav-number">6.3.</span> <span class="nav-text">Dockerfile保留字指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例一：封装CentOS"><span class="nav-number">6.4.</span> <span class="nav-text">案例一：封装CentOS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例二：自定义Tomcat"><span class="nav-number">6.5.</span> <span class="nav-text">案例二：自定义Tomcat</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tulong Xiao</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
